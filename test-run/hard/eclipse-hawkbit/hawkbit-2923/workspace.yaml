id: eclipse-hawkbit/hawkbit-2923
repo: eclipse-hawkbit/hawkbit
base_commit: 520b887b7097e90fae4236152cae5c8cfbfe33dc
merge_commit: 8ee76412b075ca2e8c31a421098031057b21330f
language: java
difficulty_score: 3
created_at: 2026-02-17T13:22:57.068162213Z
patch: "diff --git a/hawkbit-mcp/hawkbit-mcp-server/pom.xml b/hawkbit-mcp/hawkbit-mcp-server/pom.xml\nnew file mode 100644\nindex 0000000000..15b5342ed4\n--- /dev/null\n+++ b/hawkbit-mcp/hawkbit-mcp-server/pom.xml\n@@ -0,0 +1,62 @@\n+<!--\n+\n+    Copyright (c) 2026 Contributors to the Eclipse Foundation\n+\n+    This program and the accompanying materials are made\n+    available under the terms of the Eclipse Public License 2.0\n+    which is available at https://www.eclipse.org/legal/epl-2.0/\n+\n+    SPDX-License-Identifier: EPL-2.0\n+\n+-->\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+    <parent>\n+        <groupId>org.eclipse.hawkbit</groupId>\n+        <artifactId>hawkbit-mcp-parent</artifactId>\n+        <version>${revision}</version>\n+    </parent>\n+\n+    <artifactId>hawkbit-mcp-server</artifactId>\n+    <name>hawkBit :: MCP :: Server (Standalone)</name>\n+    <description>Standalone MCP server that connects to hawkBit via REST API</description>\n+\n+    <properties>\n+        <spring.app.class>org.eclipse.hawkbit.mcp.server.McpServerStart</spring.app.class>\n+    </properties>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.eclipse.hawkbit</groupId>\n+            <artifactId>hawkbit-mcp-starter</artifactId>\n+            <version>${project.version}</version>\n+        </dependency>\n+    </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.springframework.boot</groupId>\n+                <artifactId>spring-boot-maven-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <goals>\n+                            <goal>repackage</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${baseDir}</outputDirectory>\n+                            <mainClass>${spring.app.class}</mainClass>\n+                            <layout>JAR</layout>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+        </plugins>\n+        <resources>\n+            <resource>\n+                <directory>src/main/resources</directory>\n+            </resource>\n+        </resources>\n+    </build>\n+</project>\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/McpServerStart.java b/hawkbit-mcp/hawkbit-mcp-server/src/main/java/org/eclipse/hawkbit/mcp/server/McpServerStart.java\nsimilarity index 82%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/McpServerStart.java\nrename to hawkbit-mcp/hawkbit-mcp-server/src/main/java/org/eclipse/hawkbit/mcp/server/McpServerStart.java\nindex f9fcccadd5..6e53eae411 100644\n--- a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/McpServerStart.java\n+++ b/hawkbit-mcp/hawkbit-mcp-server/src/main/java/org/eclipse/hawkbit/mcp/server/McpServerStart.java\n@@ -9,10 +9,8 @@\n  */\n package org.eclipse.hawkbit.mcp.server;\n \n-import org.eclipse.hawkbit.mcp.server.config.HawkbitMcpProperties;\n import org.springframework.boot.SpringApplication;\n import org.springframework.boot.autoconfigure.SpringBootApplication;\n-import org.springframework.boot.context.properties.EnableConfigurationProperties;\n import org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration;\n \n /**\n@@ -23,7 +21,6 @@\n  * </p>\n  */\n @SpringBootApplication(exclude = UserDetailsServiceAutoConfiguration.class)\n-@EnableConfigurationProperties(HawkbitMcpProperties.class)\n public class McpServerStart {\n \n     public static void main(final String[] args) {\ndiff --git a/hawkbit-mcp/src/main/resources/application.properties b/hawkbit-mcp/hawkbit-mcp-server/src/main/resources/application.properties\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/resources/application.properties\nrename to hawkbit-mcp/hawkbit-mcp-server/src/main/resources/application.properties\ndiff --git a/hawkbit-mcp/hawkbit-mcp-starter/pom.xml b/hawkbit-mcp/hawkbit-mcp-starter/pom.xml\nnew file mode 100644\nindex 0000000000..5f61b4c00d\n--- /dev/null\n+++ b/hawkbit-mcp/hawkbit-mcp-starter/pom.xml\n@@ -0,0 +1,114 @@\n+<!--\n+\n+    Copyright (c) 2026 Contributors to the Eclipse Foundation\n+\n+    This program and the accompanying materials are made\n+    available under the terms of the Eclipse Public License 2.0\n+    which is available at https://www.eclipse.org/legal/epl-2.0/\n+\n+    SPDX-License-Identifier: EPL-2.0\n+\n+-->\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+    <parent>\n+        <groupId>org.eclipse.hawkbit</groupId>\n+        <artifactId>hawkbit-mcp-parent</artifactId>\n+        <version>${revision}</version>\n+    </parent>\n+\n+    <artifactId>hawkbit-mcp-starter</artifactId>\n+    <name>hawkBit :: MCP :: Spring Boot Starter</name>\n+\n+    <dependencies>\n+        <!-- hawkBit SDK -->\n+        <dependency>\n+            <groupId>org.eclipse.hawkbit</groupId>\n+            <artifactId>hawkbit-sdk-mgmt</artifactId>\n+            <version>${project.version}</version>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>org.springdoc</groupId>\n+                    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>\n+                </exclusion>\n+                <exclusion>\n+                    <groupId>org.springframework.boot</groupId>\n+                    <artifactId>spring-boot-starter-hateoas</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>\n+\n+        <!-- Spring AI MCP -->\n+        <dependency>\n+            <groupId>org.springframework.ai</groupId>\n+            <artifactId>spring-ai-starter-mcp-server-webmvc</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.springframework.ai</groupId>\n+            <artifactId>spring-ai-mcp-annotations</artifactId>\n+        </dependency>\n+\n+        <!-- Spring -->\n+        <dependency>\n+            <groupId>org.springframework.boot</groupId>\n+            <artifactId>spring-boot-starter-validation</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.springframework.boot</groupId>\n+            <artifactId>spring-boot-starter-security</artifactId>\n+        </dependency>\n+\n+        <!-- Caching -->\n+        <dependency>\n+            <groupId>com.github.ben-manes.caffeine</groupId>\n+            <artifactId>caffeine</artifactId>\n+        </dependency>\n+    </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <!-- Copy hawkBit docs for MCP resources -->\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>copy-hawkbit-docs</id>\n+                        <phase>generate-resources</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${project.build.outputDirectory}/hawkbit-docs</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>${project.basedir}/../../docs</directory>\n+                                    <includes>\n+                                        <include>README.md</include>\n+                                        <include>what-is-hawkbit.md</include>\n+                                        <include>quick-start.md</include>\n+                                        <include>features.md</include>\n+                                        <include>architecture.md</include>\n+                                        <include>base-setup.md</include>\n+                                        <include>hawkbit-sdk.md</include>\n+                                        <include>feign-client.md</include>\n+                                        <include>clustering.md</include>\n+                                        <include>authentication.md</include>\n+                                        <include>authorization.md</include>\n+                                        <include>datamodel.md</include>\n+                                        <include>rollout-management.md</include>\n+                                        <include>targetstate.md</include>\n+                                        <include>management-api.md</include>\n+                                        <include>direct-device-integration-api.md</include>\n+                                        <include>device-management-federation-api.md</include>\n+                                    </includes>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+        </plugins>\n+    </build>\n+</project>\ndiff --git a/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/autoconfigure/mcp/McpAutoConfiguration.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/autoconfigure/mcp/McpAutoConfiguration.java\nnew file mode 100644\nindex 0000000000..81fe1e7893\n--- /dev/null\n+++ b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/autoconfigure/mcp/McpAutoConfiguration.java\n@@ -0,0 +1,52 @@\n+/**\n+ * Copyright (c) 2026 Contributors to the Eclipse Foundation\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.eclipse.hawkbit.autoconfigure.mcp;\n+\n+import org.eclipse.hawkbit.mcp.server.client.AuthenticationValidator;\n+import org.eclipse.hawkbit.mcp.server.client.HawkbitAuthenticationValidator;\n+import org.eclipse.hawkbit.mcp.server.config.HawkbitClientConfiguration;\n+import org.eclipse.hawkbit.mcp.server.config.HawkbitMcpProperties;\n+import org.eclipse.hawkbit.mcp.server.config.McpHttpClientConfiguration;\n+import org.eclipse.hawkbit.mcp.server.config.McpSecurityConfiguration;\n+import org.eclipse.hawkbit.mcp.server.config.McpStdioClientConfiguration;\n+import org.eclipse.hawkbit.mcp.server.config.McpToolConfiguration;\n+import org.eclipse.hawkbit.sdk.HawkbitClient;\n+import org.eclipse.hawkbit.sdk.Tenant;\n+import org.springframework.boot.autoconfigure.AutoConfiguration;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\n+import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\n+import org.springframework.boot.context.properties.EnableConfigurationProperties;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Import;\n+\n+/**\n+ * Auto-configuration for the hawkBit MCP server.\n+ */\n+@AutoConfiguration\n+@ConditionalOnClass(McpToolConfiguration.class)\n+@Import({\n+        McpToolConfiguration.class,\n+        HawkbitClientConfiguration.class,\n+        McpHttpClientConfiguration.class,\n+        McpStdioClientConfiguration.class,\n+        McpSecurityConfiguration.class\n+})\n+@EnableConfigurationProperties(HawkbitMcpProperties.class)\n+public class McpAutoConfiguration {\n+\n+    @Bean\n+    @ConditionalOnMissingBean\n+    @ConditionalOnProperty(name = \"hawkbit.mcp.validation.enabled\", havingValue = \"true\", matchIfMissing = true)\n+    public AuthenticationValidator hawkbitAuthenticationValidator(\n+            final HawkbitClient hawkbitClient, final Tenant dummyTenant, final HawkbitMcpProperties properties) {\n+        return new HawkbitAuthenticationValidator(hawkbitClient, dummyTenant, properties);\n+    }\n+}\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/client/AuthenticationValidator.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/client/AuthenticationValidator.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/client/AuthenticationValidator.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/client/AuthenticationValidator.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/client/HawkbitAuthenticationValidator.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/client/HawkbitAuthenticationValidator.java\nsimilarity index 95%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/client/HawkbitAuthenticationValidator.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/client/HawkbitAuthenticationValidator.java\nindex 09c7965155..17c39595f0 100644\n--- a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/client/HawkbitAuthenticationValidator.java\n+++ b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/client/HawkbitAuthenticationValidator.java\n@@ -22,17 +22,13 @@\n import org.eclipse.hawkbit.mgmt.rest.api.MgmtTenantManagementRestApi;\n import org.eclipse.hawkbit.sdk.HawkbitClient;\n import org.eclipse.hawkbit.sdk.Tenant;\n-import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\n import org.springframework.http.ResponseEntity;\n-import org.springframework.stereotype.Component;\n \n /**\n  * Validates authentication credentials against hawkBit REST API using the SDK.\n  * This validator is conditionally created when {@code hawkbit.mcp.validation.enabled=true}.\n  */\n @Slf4j\n-@Component\n-@ConditionalOnProperty(name = \"hawkbit.mcp.validation.enabled\", havingValue = \"true\", matchIfMissing = true)\n public class HawkbitAuthenticationValidator implements AuthenticationValidator {\n \n     private final HawkbitClient hawkbitClient;\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/client/McpAuthenticationException.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/client/McpAuthenticationException.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/client/McpAuthenticationException.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/client/McpAuthenticationException.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/HawkbitClientConfiguration.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/HawkbitClientConfiguration.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/HawkbitClientConfiguration.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/HawkbitClientConfiguration.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/HawkbitMcpProperties.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/HawkbitMcpProperties.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/HawkbitMcpProperties.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/HawkbitMcpProperties.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpHttpClientConfiguration.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpHttpClientConfiguration.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpHttpClientConfiguration.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpHttpClientConfiguration.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpSecurityConfiguration.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpSecurityConfiguration.java\nsimilarity index 99%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpSecurityConfiguration.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpSecurityConfiguration.java\nindex 51030c5194..f6a1772ac1 100644\n--- a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpSecurityConfiguration.java\n+++ b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpSecurityConfiguration.java\n@@ -63,6 +63,7 @@ public class McpSecurityConfiguration {\n     @SuppressWarnings(\"java:S4502\") // CSRF protection is not needed for stateless REST APIs using Authorization header\n     public SecurityFilterChain mcpSecurityFilterChain(final HttpSecurity http) throws Exception {\n         http\n+                .securityMatcher(\"/mcp/**\")\n                 .authorizeHttpRequests(auth -> auth.anyRequest().permitAll())\n                 .csrf(AbstractHttpConfigurer::disable)\n                 .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpStdioClientConfiguration.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpStdioClientConfiguration.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpStdioClientConfiguration.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpStdioClientConfiguration.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpToolConfiguration.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpToolConfiguration.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpToolConfiguration.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/config/McpToolConfiguration.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/ActionRequest.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/ActionRequest.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/ActionRequest.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/ActionRequest.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/DistributionSetRequest.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/DistributionSetRequest.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/DistributionSetRequest.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/DistributionSetRequest.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/ListRequest.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/ListRequest.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/ListRequest.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/ListRequest.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/OperationResponse.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/OperationResponse.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/OperationResponse.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/OperationResponse.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/PagedResponse.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/PagedResponse.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/PagedResponse.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/PagedResponse.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/RolloutRequest.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/RolloutRequest.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/RolloutRequest.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/RolloutRequest.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/SoftwareModuleRequest.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/SoftwareModuleRequest.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/SoftwareModuleRequest.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/SoftwareModuleRequest.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/TargetFilterRequest.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/TargetFilterRequest.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/TargetFilterRequest.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/TargetFilterRequest.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/TargetRequest.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/TargetRequest.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/dto/TargetRequest.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/dto/TargetRequest.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/prompts/HawkbitPromptProvider.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/prompts/HawkbitPromptProvider.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/prompts/HawkbitPromptProvider.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/prompts/HawkbitPromptProvider.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/resources/HawkbitDocumentationResource.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/resources/HawkbitDocumentationResource.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/resources/HawkbitDocumentationResource.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/resources/HawkbitDocumentationResource.java\ndiff --git a/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/tools/HawkbitMcpToolProvider.java b/hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/tools/HawkbitMcpToolProvider.java\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/tools/HawkbitMcpToolProvider.java\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/java/org/eclipse/hawkbit/mcp/server/tools/HawkbitMcpToolProvider.java\ndiff --git a/hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports b/hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports\nnew file mode 100644\nindex 0000000000..14244abe96\n--- /dev/null\n+++ b/hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports\n@@ -0,0 +1 @@\n+org.eclipse.hawkbit.autoconfigure.mcp.McpAutoConfiguration\ndiff --git a/hawkbit-mcp/src/main/resources/hawkbit-entity-definitions.md b/hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/hawkbit-entity-definitions.md\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/resources/hawkbit-entity-definitions.md\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/hawkbit-entity-definitions.md\ndiff --git a/hawkbit-mcp/src/main/resources/prompts/hawkbit-context.md b/hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/prompts/hawkbit-context.md\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/resources/prompts/hawkbit-context.md\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/prompts/hawkbit-context.md\ndiff --git a/hawkbit-mcp/src/main/resources/prompts/rsql-help.md b/hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/prompts/rsql-help.md\nsimilarity index 100%\nrename from hawkbit-mcp/src/main/resources/prompts/rsql-help.md\nrename to hawkbit-mcp/hawkbit-mcp-starter/src/main/resources/prompts/rsql-help.md\ndiff --git a/hawkbit-mcp/pom.xml b/hawkbit-mcp/pom.xml\nindex 12298a43f8..a752ceda1b 100644\n--- a/hawkbit-mcp/pom.xml\n+++ b/hawkbit-mcp/pom.xml\n@@ -1,6 +1,6 @@\n <!--\n \n-    Copyright (c) 2025 Contributors to the Eclipse Foundation\n+    Copyright (c) 2026 Contributors to the Eclipse Foundation\n \n     This program and the accompanying materials are made\n     available under the terms of the Eclipse Public License 2.0\n@@ -18,113 +18,12 @@\n         <version>${revision}</version>\n     </parent>\n \n-    <artifactId>hawkbit-mcp-server</artifactId>\n-    <name>hawkBit :: MCP Server (Standalone)</name>\n-    <description>Standalone MCP server that connects to hawkBit via REST API</description>\n+    <artifactId>hawkbit-mcp-parent</artifactId>\n+    <name>hawkBit :: MCP</name>\n+    <packaging>pom</packaging>\n \n-    <properties>\n-        <spring.app.class>org.eclipse.hawkbit.mcp.server.McpServerStart</spring.app.class>\n-    </properties>\n-\n-    <dependencies>\n-        <dependency>\n-            <groupId>org.eclipse.hawkbit</groupId>\n-            <artifactId>hawkbit-sdk-mgmt</artifactId>\n-            <version>${project.version}</version>\n-            <exclusions>\n-                <exclusion>\n-                    <groupId>org.springdoc</groupId>\n-                    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>\n-                </exclusion>\n-                <exclusion>\n-                    <groupId>org.springframework.boot</groupId>\n-                    <artifactId>spring-boot-starter-hateoas</artifactId>\n-                </exclusion>\n-            </exclusions>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-validation</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-security</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.springframework.ai</groupId>\n-            <artifactId>spring-ai-starter-mcp-server-webmvc</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.springframework.ai</groupId>\n-            <artifactId>spring-ai-mcp-annotations</artifactId>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>com.github.ben-manes.caffeine</groupId>\n-            <artifactId>caffeine</artifactId>\n-        </dependency>\n-    </dependencies>\n-\n-    <build>\n-        <plugins>\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-resources-plugin</artifactId>\n-                <executions>\n-                    <execution>\n-                        <id>copy-hawkbit-docs</id>\n-                        <phase>generate-resources</phase>\n-                        <goals>\n-                            <goal>copy-resources</goal>\n-                        </goals>\n-                        <configuration>\n-                            <outputDirectory>${project.build.outputDirectory}/hawkbit-docs</outputDirectory>\n-                            <resources>\n-                                <resource>\n-                                    <directory>${project.basedir}/../docs</directory>\n-                                    <includes>\n-                                        <include>README.md</include>\n-                                        <include>what-is-hawkbit.md</include>\n-                                        <include>quick-start.md</include>\n-                                        <include>features.md</include>\n-                                        <include>architecture.md</include>\n-                                        <include>base-setup.md</include>\n-                                        <include>hawkbit-sdk.md</include>\n-                                        <include>feign-client.md</include>\n-                                        <include>clustering.md</include>\n-                                        <include>authentication.md</include>\n-                                        <include>authorization.md</include>\n-                                        <include>datamodel.md</include>\n-                                        <include>rollout-management.md</include>\n-                                        <include>targetstate.md</include>\n-                                        <include>management-api.md</include>\n-                                        <include>direct-device-integration-api.md</include>\n-                                        <include>device-management-federation-api.md</include>\n-                                    </includes>\n-                                </resource>\n-                            </resources>\n-                        </configuration>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-            <plugin>\n-                <groupId>org.springframework.boot</groupId>\n-                <artifactId>spring-boot-maven-plugin</artifactId>\n-                <executions>\n-                    <execution>\n-                        <goals>\n-                            <goal>repackage</goal>\n-                        </goals>\n-                        <configuration>\n-                            <outputDirectory>${baseDir}</outputDirectory>\n-                            <mainClass>${spring.app.class}</mainClass>\n-                            <layout>JAR</layout>\n-                        </configuration>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-        </plugins>\n-    </build>\n-</project>\n\\ No newline at end of file\n+    <modules>\n+        <module>hawkbit-mcp-starter</module>\n+        <module>hawkbit-mcp-server</module>\n+    </modules>\n+</project>\n"
test_patch: ''
fail_to_pass:
- bash hawkbit-mcp/src/test/sh/test_mcp_server_start_annotations.sh
pass_to_pass:
- javac -version
install_config:
  install: ./mvnw -q -DskipTests package
  java: '21'
  test_cmd: ./mvnw test
meta:
  added_lines: '239'
  difficulty: hard
  files_changed: '31'
  pr_title: Restructure hawkbit-mcp into starter/server modules following the hawkbit conventions
  removed_lines: '117'
  source: gh-archive-pr
  test_files: '[{"path":"hawkbit-mcp/src/test/java/org/eclipse/hawkbit/mcp/server/McpAutoConfigurationTest.java","content":"package org.eclipse.hawkbit.mcp.server;\n\nimport org.eclipse.hawkbit.mcp.server.config.HawkbitMcpProperties;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.WebApplicationType;\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\nclass McpAutoConfigurationTest {\n\n    @Test\n    void autoConfigurationProvidesPropertiesBeanWithDefaults() {\n        try (ConfigurableApplicationContext context = new SpringApplicationBuilder(TestApp.class)\n                .web(WebApplicationType.NONE)\n                .properties(\n                        \"spring.main.banner-mode=off\",\n                        \"hawkbit.mcp.mgmt-url=http://example.invalid:8080\")\n                .run()) {\n            HawkbitMcpProperties properties = context.getBean(HawkbitMcpProperties.class);\n\n            assertThat(properties.getMgmtUrl()).isEqualTo(\"http://example.invalid:8080\");\n            assertThat(properties.isToolsEnabled()).isTrue();\n            assertThat(properties.isResourcesEnabled()).isTrue();\n            assertThat(properties.isPromptsEnabled()).isTrue();\n        }\n    }\n\n    @Test\n    void autoConfigurationBindsNestedOperationDefaults() {\n        try (ConfigurableApplicationContext context = new SpringApplicationBuilder(TestApp.class)\n                .web(WebApplicationType.NONE)\n                .properties(\n                        \"spring.main.banner-mode=off\",\n                        \"hawkbit.mcp.mgmt-url=http://example.invalid:8081\")\n                .run()) {\n            HawkbitMcpProperties properties = context.getBean(HawkbitMcpProperties.class);\n\n            assertThat(properties.getOperations().isGlobalOperationEnabled(\"delete\")).isTrue();\n            assertThat(properties.getOperations().getActions().getOperationEnabled(\"delete-batch\"))\n                    .isTrue();\n        }\n    }\n\n    @Configuration\n    @EnableAutoConfiguration\n    static class TestApp {\n    }\n}\n"},{"path":"hawkbit-mcp/src/test/python/test_mcp_server_start_annotations.py","content":"import os\nimport subprocess\nimport tempfile\nimport unittest\nfrom pathlib import Path\n\n\nclass McpServerStartAnnotationTest(unittest.TestCase):\n    def test_enable_configuration_properties_removed(self):\n        repo_root = Path(__file__).resolve().parents[3]\n        base_source = repo_root / \"hawkbit-mcp\" / \"src\" / \"main\" / \"java\" / \"org\" / \"eclipse\" / \"hawkbit\" / \"mcp\" / \"server\" / \"McpServerStart.java\"\n        alt_source = repo_root / \"hawkbit-mcp\" / \"hawkbit-mcp-server\" / \"src\" / \"main\" / \"java\" / \"org\" / \"eclipse\" / \"hawkbit\" / \"mcp\" / \"server\" / \"McpServerStart.java\"\n        source_path = alt_source if alt_source.exists() else base_source\n        self.assertTrue(source_path.exists())\n\n        with tempfile.TemporaryDirectory() as tmp_dir:\n            tmp_root = Path(tmp_dir)\n            src_root = tmp_root / \"src\"\n            class_root = tmp_root / \"classes\"\n            src_root.mkdir(parents=True)\n            class_root.mkdir(parents=True)\n\n            self._write_stub_sources(src_root)\n\n            target_path = src_root / \"org\" / \"eclipse\" / \"hawkbit\" / \"mcp\" / \"server\" / \"McpServerStart.java\"\n            target_path.parent.mkdir(parents=True, exist_ok=True)\n            target_path.write_text(source_path.read_text(), encoding=\"utf-8\")\n\n            runner_path = src_root / \"AnnotationRunner.java\"\n            runner_path.write_text(self._runner_source(), encoding=\"utf-8\")\n\n            java_files = [str(p) for p in src_root.rglob(\"*.java\")]\n            subprocess.run(\n                [\"javac\", \"-d\", str(class_root)] + java_files,\n                check=True,\n                capture_output=True,\n            )\n\n            result = subprocess.run(\n                [\"java\", \"-cp\", str(class_root), \"AnnotationRunner\"],\n                check=False,\n                capture_output=True,\n                text=True,\n            )\n\n            self.assertEqual(result.returncode, 0, result.stderr)\n\n    def _write_stub_sources(self, src_root: Path) -> None:\n        stub_sources = {\n            \"org/springframework/boot/SpringApplication.java\": \"\"\"\npackage org.springframework.boot;\n\npublic class SpringApplication {\n    public static void run(Class<?> app, String[] args) {\n    }\n}\n\"\"\",\n            \"org/springframework/boot/autoconfigure/SpringBootApplication.java\": \"\"\"\npackage org.springframework.boot.autoconfigure;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\npublic @interface SpringBootApplication {\n    Class<?>[] exclude() default {};\n}\n\"\"\",\n            \"org/springframework/boot/autoconfigure/security/servlet/UserDetailsServiceAutoConfiguration.java\": \"\"\"\npackage org.springframework.boot.autoconfigure.security.servlet;\n\npublic class UserDetailsServiceAutoConfiguration {}\n\"\"\",\n            \"org/springframework/boot/context/properties/EnableConfigurationProperties.java\": \"\"\"\npackage org.springframework.boot.context.properties;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\npublic @interface EnableConfigurationProperties {\n    Class<?>[] value() default {};\n}\n\"\"\",\n            \"org/eclipse/hawkbit/mcp/server/config/HawkbitMcpProperties.java\": \"\"\"\npackage org.eclipse.hawkbit.mcp.server.config;\n\npublic class HawkbitMcpProperties {}\n\"\"\",\n        }\n\n        for relative, content in stub_sources.items():\n            path = src_root / relative\n            path.parent.mkdir(parents=True, exist_ok=True)\n            path.write_text(content.strip() + \"\\n\", encoding=\"utf-8\")\n\n    @staticmethod\n    def _runner_source() -> str:\n        return \"\"\"\nimport java.lang.annotation.Annotation;\n\npublic class AnnotationRunner {\n    public static void main(String[] args) throws Exception {\n        Class<?> target = Class.forName(\"org.eclipse.hawkbit.mcp.server.McpServerStart\");\n        boolean hasSpringBoot = target.isAnnotationPresent(\n                org.springframework.boot.autoconfigure.SpringBootApplication.class);\n        boolean hasEnableProperties = target.isAnnotationPresent(\n                org.springframework.boot.context.properties.EnableConfigurationProperties.class);\n\n        if (!hasSpringBoot) {\n            System.err.println(\"Missing SpringBootApplication annotation\");\n            System.exit(2);\n        }\n        if (hasEnableProperties) {\n            System.err.println(\"EnableConfigurationProperties should be removed\");\n            System.exit(3);\n        }\n    }\n}\n\"\"\"\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n"},{"path":"hawkbit-mcp/src/test/sh/test_mcp_server_start_annotations.sh","content":"#!/usr/bin/env bash\nset -euo pipefail\n\nROOT_DIR=\"$(cd \"$(dirname \"$0\")/../../../..\" && pwd)\"\nBASE_SOURCE=\"$ROOT_DIR/hawkbit-mcp/src/main/java/org/eclipse/hawkbit/mcp/server/McpServerStart.java\"\nALT_SOURCE=\"$ROOT_DIR/hawkbit-mcp/hawkbit-mcp-server/src/main/java/org/eclipse/hawkbit/mcp/server/McpServerStart.java\"\n\nif [[ -f \"$ALT_SOURCE\" ]]; then\n  SOURCE_PATH=\"$ALT_SOURCE\"\nelse\n  SOURCE_PATH=\"$BASE_SOURCE\"\nfi\n\nif [[ ! -f \"$SOURCE_PATH\" ]]; then\n  echo \"Cannot locate McpServerStart.java\" >&2\n  exit 1\nfi\n\nTMP_DIR=\"$(mktemp -d)\"\nSRC_ROOT=\"$TMP_DIR/src\"\nCLASS_ROOT=\"$TMP_DIR/classes\"\nmkdir -p \"$SRC_ROOT\" \"$CLASS_ROOT\"\n\nwrite_stub() {\n  local path=\"$1\"\n  local content=\"$2\"\n  mkdir -p \"$(dirname \"$SRC_ROOT/$path\")\"\n  printf \"%s\\n\" \"$content\" > \"$SRC_ROOT/$path\"\n}\n\nwrite_stub \"org/springframework/boot/SpringApplication.java\" $''package org.springframework.boot;\\n\\npublic class SpringApplication {\\n    public static void run(Class<?> app, String[] args) {\\n    }\\n}\\n''\n\nwrite_stub \"org/springframework/boot/autoconfigure/SpringBootApplication.java\" $''package org.springframework.boot.autoconfigure;\\n\\nimport java.lang.annotation.ElementType;\\nimport java.lang.annotation.Retention;\\nimport java.lang.annotation.RetentionPolicy;\\nimport java.lang.annotation.Target;\\n\\n@Retention(RetentionPolicy.RUNTIME)\\n@Target(ElementType.TYPE)\\npublic @interface SpringBootApplication {\\n    Class<?>[] exclude() default {};\\n}\\n''\n\nwrite_stub \"org/springframework/boot/autoconfigure/security/servlet/UserDetailsServiceAutoConfiguration.java\" $''package org.springframework.boot.autoconfigure.security.servlet;\\n\\npublic class UserDetailsServiceAutoConfiguration {}\\n''\n\nwrite_stub \"org/springframework/boot/context/properties/EnableConfigurationProperties.java\" $''package org.springframework.boot.context.properties;\\n\\nimport java.lang.annotation.ElementType;\\nimport java.lang.annotation.Retention;\\nimport java.lang.annotation.RetentionPolicy;\\nimport java.lang.annotation.Target;\\n\\n@Retention(RetentionPolicy.RUNTIME)\\n@Target(ElementType.TYPE)\\npublic @interface EnableConfigurationProperties {\\n    Class<?>[] value() default {};\\n}\\n''\n\nwrite_stub \"org/eclipse/hawkbit/mcp/server/config/HawkbitMcpProperties.java\" $''package org.eclipse.hawkbit.mcp.server.config;\\n\\npublic class HawkbitMcpProperties {}\\n''\n\nTARGET_DIR=\"$SRC_ROOT/org/eclipse/hawkbit/mcp/server\"\nmkdir -p \"$TARGET_DIR\"\ncp \"$SOURCE_PATH\" \"$TARGET_DIR/McpServerStart.java\"\n\ncat > \"$SRC_ROOT/AnnotationRunner.java\" <<''RUNNER''\npublic class AnnotationRunner {\n    public static void main(String[] args) throws Exception {\n        Class<?> target = Class.forName(\"org.eclipse.hawkbit.mcp.server.McpServerStart\");\n        boolean hasSpringBoot = target.isAnnotationPresent(\n                org.springframework.boot.autoconfigure.SpringBootApplication.class);\n        boolean hasEnableProperties = target.isAnnotationPresent(\n                org.springframework.boot.context.properties.EnableConfigurationProperties.class);\n\n        if (!hasSpringBoot) {\n            System.err.println(\"Missing SpringBootApplication annotation\");\n            System.exit(2);\n        }\n        if (hasEnableProperties) {\n            System.err.println(\"EnableConfigurationProperties should be removed\");\n            System.exit(3);\n        }\n    }\n}\nRUNNER\n\nfind \"$SRC_ROOT\" -name \"*.java\" > \"$TMP_DIR/sources.txt\"\n\njavac -d \"$CLASS_ROOT\" @\"$TMP_DIR/sources.txt\"\n\njava -cp \"$CLASS_ROOT\" AnnotationRunner\n\nrm -rf \"$TMP_DIR\"\n"}]'
  test_generation: agentic-docker
prompt: |-
  eclipse-hawkbit/hawkbit (#2923): Restructure hawkbit-mcp into starter/server modules following the hawkbit conventions

  Restructure the hawkbit-mcp component to align with hawkbitâ€™s starter/server module conventions. Ensure the module layout and naming follow established hawkbit patterns while preserving existing functionality and public behavior.
original_pr_body: |-
  eclipse-hawkbit/hawkbit (#2923): Restructure hawkbit-mcp into starter/server modules following the hawkbit conventions

  (no description)
quality_score: 0.76
quality_passed: true
docker_passed: false
workspace_path: null
status: ready
