id: happier-dev/happier-35
repo: happier-dev/happier
base_commit: 0f345e6f28b4ab2d2c16458f0698f09428fa9efc
merge_commit: 9a7fa717774f8e93adb7fa057ca188a2873b5276
language: typescript
difficulty_score: 1
created_at: 2026-02-17T12:17:43.642000884Z
patch: |
  diff --git a/.coderabbit.yaml b/.coderabbit.yaml
  index eb23d61d..4089a388 100644
  --- a/.coderabbit.yaml
  +++ b/.coderabbit.yaml
  @@ -1,61 +1,52 @@
   # yaml-language-server: $schema=https://coderabbit.ai/integrations/schema.v2.json
  +language: en-US
  +early_access: false
  +
   reviews:
     profile: chill
     request_changes_workflow: true
  +
     auto_review:
       enabled: true
       drafts: false
       base_branches:
  -    - main
  -    - master
  -    - develop
  +      - main
  +      - master
  +      - develop
  +
     high_level_summary: true
  -  review_status_comment: true
  +  review_status: true
     poem: false
     collapse_walkthrough: false
  -  auto_approve:
  -    enabled: false
  +
  +  path_instructions:
  +    - path: "**/*.md"
  +      instructions: |
  +        Review documentation for:
  +        - Clarity and accuracy
  +        - Proper formatting
  +        - Working links
  +        - Code example correctness
  +
  +    - path: "tests/**/*"
  +      instructions: |
  +        Review tests for:
  +        - Adequate coverage
  +        - Clear test names
  +        - Proper assertions
  +        - Edge case handling
  +
  +    - path: "**/README.md"
  +      instructions: |
  +        Review README for:
  +        - Clear project description
  +        - Installation instructions
  +        - Usage examples
  +        - Contributing guidelines
  +
   chat:
     auto_reply: true
  +
   knowledge_base:
     learnings:
       scope: local
  -language: en-US
  -early_access: false
  -path_instructions:
  -- path: '**/*.md'
  -  instructions: 'Review documentation for:
  -
  -    - Clarity and accuracy
  -
  -    - Proper formatting
  -
  -    - Working links
  -
  -    - Code example correctness
  -
  -    '
  -- path: tests/**/*
  -  instructions: 'Review tests for:
  -
  -    - Adequate coverage
  -
  -    - Clear test names
  -
  -    - Proper assertions
  -
  -    - Edge case handling
  -
  -    '
  -- path: '**/README.md'
  -  instructions: 'Review README for:
  -
  -    - Clear project description
  -
  -    - Installation instructions
  -
  -    - Usage examples
  -
  -    - Contributing guidelines
  -
  -    '
test_patch: ''
fail_to_pass:
- yarn install --ignore-engines --frozen-lockfile && node tests/coderabbit-config.test.js
pass_to_pass:
- yarn -s workspace @happier-dev/protocol build
install_config:
  install: npm install
  node: '20'
  test_cmd: npm test
meta:
  added_lines: '36'
  difficulty: easy
  files_changed: '1'
  pr_title: Fix CodeRabbit .coderabbit.yaml schema warnings
  removed_lines: '45'
  source: gh-archive-pr
  test_files: '[{"path":"tests/coderabbit-config.test.js","content":"const fs = require(''node:fs'');\nconst assert = require(''node:assert/strict'');\nconst YAML = require(''yaml'');\n\nconst raw = fs.readFileSync(''.coderabbit.yaml'', ''utf8'');\nconst config = YAML.parse(raw);\n\nassert.ok(config && typeof config === ''object'', ''config should parse to an object'');\nassert.ok(config.reviews && typeof config.reviews === ''object'', ''reviews section should exist'');\n\nconst reviews = config.reviews;\n\nassert.strictEqual(reviews.review_status, true, ''review_status should be enabled'');\nassert.ok(!(''review_status_comment'' in reviews), ''review_status_comment should be removed'');\nassert.ok(!(''auto_approve'' in reviews), ''auto_approve should be removed'');\n\nassert.ok(Array.isArray(reviews.path_instructions), ''path_instructions should live under reviews'');\nassert.ok(!(''path_instructions'' in config), ''top-level path_instructions should be removed'');\n\nfor (const instruction of reviews.path_instructions) {\n  assert.ok(instruction && typeof instruction === ''object'', ''path instruction should be an object'');\n  assert.strictEqual(typeof instruction.path, ''string'', ''path should be a string'');\n  assert.ok(instruction.path.length > 0, ''path should not be empty'');\n  assert.strictEqual(typeof instruction.instructions, ''string'', ''instructions should be a string'');\n  assert.ok(instruction.instructions.trim().length > 0, ''instructions should not be empty'');\n}\n\nassert.ok(reviews.auto_review && typeof reviews.auto_review === ''object'', ''auto_review should exist'');\nassert.ok(Array.isArray(reviews.auto_review.base_branches), ''base_branches should be an array'');\nassert.ok(reviews.auto_review.base_branches.length > 0, ''base_branches should be non-empty'');\nfor (const branch of reviews.auto_review.base_branches) {\n  assert.strictEqual(typeof branch, ''string'', ''base branch entries should be strings'');\n  assert.ok(branch.trim().length > 0, ''base branch entries should not be empty'');\n}\n\nconsole.log(''coderabbit config validation passed'');\n"}]'
  test_generation: agentic-docker
prompt: |-
  happier-dev/happier (#35): Fix CodeRabbit .coderabbit.yaml schema warnings

  Update the CodeRabbit configuration to conform to the current schema and eliminate schema warnings. Ensure the review settings are organized under the correct sections, use the supported review status configuration, and remove any unsupported auto-approval configuration. The configuration should validate cleanly against the latest schema.
original_pr_body: |-
  happier-dev/happier (#35): Fix CodeRabbit .coderabbit.yaml schema warnings

  Same change as #34, but targeting the dev branch.

  Fixes CodeRabbit config warnings by aligning .coderabbit.yaml with schema.v2.json:
  - Move path_instructions under reviews.path_instructions
  - Replace deprecated/invalid reviews.review_status_comment with reviews.review_status
  - Remove unsupported reviews.auto_approve block

  <!-- This is an auto-generated comment: release notes by coderabbit.ai -->

  ## Summary by CodeRabbit

  * **Chores**
    * Restructured code review configuration system with improved settings organization.
    * Updated review status reporting in the feedback process.
    * Removed automatic approval functionality from the review workflow.
    * Added language and early access configuration support options.

  <!-- end of auto-generated comment: release notes by coderabbit.ai -->
quality_score: 0.2
quality_passed: true
docker_passed: false
workspace_path: null
status: ready
